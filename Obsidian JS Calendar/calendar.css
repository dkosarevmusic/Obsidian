.ojsc-container {
    width: 100%;
    margin-top: 20px; /* Добавляем отступ сверху, чтобы выпадающий список не обрезался */
}
.ojsc-footer {
    text-align: right;
    font-size: 0.8em;
    color: var(--text-muted);
    margin-top: 10px;
    padding-right: 5px;
}

.ojsc-calendar-header { position: relative; display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; gap: 10px; padding: 8px 12px; background-color: var(--background-secondary); border-radius: 6px; }
.ojsc-button-group { display: flex; gap: 5px; flex-shrink: 0; }
.ojsc-main-nav-group { display: flex; gap: 5px; }
.ojsc-calendar-header select, .ojsc-calendar-header button { background-color: var(--background-modifier-form-field); color: var(--text-normal); border: 1px solid var(--background-modifier-border); border-radius: 4px; padding: 4px 8px; }
.ojsc-calendar-header select {
    text-align: center;
    text-align-last: center;
}
.ojsc-calendar-header h2 { position: absolute; left: 50%; transform: translateX(-50%); margin: 0; text-transform: capitalize; color: white; text-align: center; }
.ojsc-multi-month-header { 
    text-align: center; 
    text-transform: capitalize; 
    margin-top: 20px; 
    margin-bottom: 5px; 
    background-color: var(--background-secondary);
    color: var(--text-accent) !important;
    padding: 6px 0;
    border-radius: 6px;
}
/* Убираем верхний отступ у самого первого заголовка месяца в многомесячных видах */
.ojsc-multi-month-header:first-of-type {
    margin-top: 0;
}

.ojsc-day-card {
    border: 1px solid var(--background-modifier-border);
    border-radius: 6px;
    padding: 8px;
    background-color: var(--background-secondary);
    flex: 1;
    min-width: 0; /* Предотвращает переполнение контентом */
    display: flex;
    flex-direction: column;
}
.ojsc-day-card.ojsc-today {
    border-color: var(--text-accent);
}
.ojsc-day-card.ojsc-drop-target {
    background-color: var(--background-modifier-hover);
    border-style: dashed;
}
.ojsc-day-card-header {
    font-weight: bold;
    margin-bottom: 4px;
}
.ojsc-day-card .ojsc-task-list {
    list-style: none;
    padding: 0; /* Убираем внутренние отступы списка */
    margin: 8px 0 0 0; /* Убираем отрицательный margin у списка */
    font-size: 0.9em;
}
.ojsc-day-card .ojsc-task-item {
    margin-bottom: 4px;
    padding: 1px 6px;
    border-radius: 4px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
/* Стиль для элемента, который перетаскивается на мобильных */
.ojsc-task-item.ojsc-dragging {
    opacity: 0.5;
    border-style: dashed;
}
/* Стиль для подсветки "важных" задач. Накладывается поверх цвета Area. */
.ojsc-task-item.ojsc-task-item-important {
    /* Добавляем красную рамку справа, чтобы не конфликтовать с рамкой Area слева */
    box-shadow: inset -3px 0 0 hsl(0, 80%, 50%);
    /* Можно добавить и полупрозрачный фон, если нужно более сильное выделение */
    /* background-image: linear-gradient(to right, hsla(0, 80%, 50%, 0.1), hsla(0, 80%, 50%, 0.1)); */
}
/* Стили для сеток (месяц, год) */
.ojsc-month-container { margin-bottom: 20px; }
.ojsc-weekdays-header {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 5px; /* Отступ между плашками */
    margin-bottom: 5px;
}
.ojsc-weekday {
    background-color: var(--background-secondary);
    color: var(--text-muted);
    padding: 4px 0;
    border-radius: 4px;
    text-align: center;
    font-size: 0.85em;
    font-weight: 600;
}
.ojsc-weekday.ojsc-weekend {
    color: var(--text-accent);
}
.ojsc-month-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 5px;
}
.ojsc-month-grid-card {
    min-height: 100px;
    padding: 4px;
}
.ojsc-month-grid-card .ojsc-day-card-header {
    font-size: 0.9em;
    text-align: right;
    min-height: 1.8em; /* Задаем минимальную высоту, равную высоте кружка */
}
.ojsc-month-grid-card.ojsc-other-month {
    opacity: 0.5;
}
.ojsc-today-number {
    background-color: var(--text-accent);
    color: var(--text-on-accent, white);
    border-radius: 50%;
    display: inline-block;
    width: 1.8em; height: 1.8em; line-height: 1.8em;
    text-align: center;
}
.ojsc-clickable-day {
    cursor: pointer;
    transition: background-color 0.2s ease-in-out;
    border-radius: 4px;
    background-color: var(--background-modifier-form-field); /* Постоянное выделение */
    margin: -2px; /* Компенсируем padding родителя, чтобы ховер был красивее */
    padding: 2px; /* Возвращаем внутренний отступ */
}
.ojsc-clickable-day:hover {
    background-color: var(--background-modifier-hover);
}

/* --- Кастомные сдвиги для разных режимов --- */
/* Для месячного вида, компенсируем padding: 4px у .ojsc-month-grid-card */
.ojsc-month-grid .ojsc-task-item {
    margin-left: 2px; /* Сдвиг вправо на 1px */
}

/* --- Адаптивность для мобильных устройств --- */
@media (max-width: 650px) {
    .ojsc-calendar-header {
        flex-direction: column; /* Элементы в столбец */
        align-items: center; /* Центрируем элементы по горизонтали */
    }
    .ojsc-calendar-header h2 {
        position: static; /* Убираем абсолютное позиционирование */
        transform: none; /* Сбрасываем трансформацию */
        order: 2; /* Ставим заголовок вторым */
        margin-bottom: 8px; /* Добавляем отступ снизу */
    }
    .ojsc-button-group {
        justify-content: center; /* Центрируем кнопки */
        order: 3; /* Ставим кнопки управления третьими */
        flex-direction: column; /* Ставим кнопки в столбец */
        align-items: stretch; /* Растягиваем кнопки на всю ширину */
    }
    .ojsc-main-nav-group {
        display: flex;
        justify-content: space-between; /* Распределяем кнопки по ширине */
        gap: 5px; /* Добавляем отступ между кнопками */
    }
    .ojsc-main-nav-group button {
        flex-grow: 1; /* Позволяем кнопкам расти */
    }
    .ojsc-calendar-header select {
        order: 1; /* Ставим выбор режима первым */
        margin-bottom: 8px; /* Добавляем отступ снизу */
    }
}